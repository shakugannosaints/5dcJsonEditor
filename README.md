# 国际象棋多时间线可视化编辑器使用说明

## 项目概述

这是一个基于React的国际象棋多时间线可视化编辑器，支持以下功能：

- 导入/导出特定格式的JSON文件
- 创建和管理多个时间线（正数、负数、零时间线）
- 在时间线上添加、删除和复制棋盘
- 自由放置和移动棋子
- 撤销/重做操作
- 响应式设计，适配不同设备

## 部署说明

### 开发环境运行

1. 解压`chess_editor_source.zip`文件
2. 进入项目目录：`cd chess_editor_app`
3. 安装依赖：`pnpm install`
4. 启动开发服务器：`pnpm run dev`
5. 在浏览器中访问：`http://localhost:5173`

### 生产环境部署

1. 解压`chess_editor_source.zip`文件
2. 进入项目目录：`cd chess_editor_app`
3. 安装依赖：`pnpm install`
4. 构建项目：`pnpm build`
5. 部署`dist`目录中的文件到您的Web服务器

## 使用说明

### 导入/导出功能

- 点击控制面板中的"导入"按钮，选择JSON文件进行导入
- 点击"导出"按钮，将当前编辑器状态导出为JSON文件

### 时间线管理

- 使用时间线列表上方的按钮添加不同类型的时间线
- 时间线按照负数在上、正数在下的顺序排列
- 点击时间线上的"删除时间线"按钮可移除整个时间线

### 棋盘操作

- 点击时间线中的"添加棋盘"按钮在时间线末尾添加新棋盘
- 点击棋盘下方的"删除"按钮移除棋盘
- 可以跨时间线复制棋盘（通过拖拽棋子实现）

### 棋子操作

- 拖拽棋子可以在棋盘内或跨棋盘移动
- 棋子可以自由放置，不受国际象棋规则限制

### 撤销/重做

- 点击控制面板中的"撤销"和"重做"按钮
- 也可以使用键盘快捷键：Ctrl+Z（撤销）和Ctrl+Y（重做）

### 元数据编辑

- 点击"编辑元数据"按钮可以修改棋局名称、作者和穿越动画开关

## JSON格式说明

编辑器支持的JSON格式如下：

```json
{
  "Name": "棋局名称",
  "Author": "作者名称",
  "Timelines": {
    "-1L": [
      "3k1/5/5/2K2/5"
    ],
    "0L": [
      "3k1/5/5/2K2/5"
    ],
    "+0L": [
      null, "8/8/8/8/8/8/8/8"
    ]
  },
  "CosmeticTurnOffset": -1
}
```

- `Name`：棋局名称
- `Author`：作者名称
- `Timelines`：包含多个时间线的对象
  - 键为时间线ID（如"-1L", "0L", "+0L"等）
  - 值为棋盘状态数组，每个元素是FEN字符串或`null`
- `CosmeticTurnOffset`：穿越动画开关

## 项目结构

- `src/components/`：UI组件
- `src/context/`：状态管理
- `src/types/`：TypeScript类型定义
- `public/`：静态资源

## 技术栈

- React + TypeScript
- React DnD（拖放功能）
- Tailwind CSS（样式）
- Vite（构建工具）

## 注意事项

- 编辑器支持不同大小的棋盘（5x5, 8x8等）
- 特殊的"+0L"和"-0L"时间线需要特别处理
- 导入的JSON文件必须符合指定格式
